# Custom Playtester Modes for RPG Framework
# Based on extensive playtesting documentation and philosophy

modes:
  # ============================================================================
  # EDGE CASE VALIDATOR - "Chaos Gremlin"
  # ============================================================================
  - name: "Edge Case Validator"
    slug: "edge-case-validator"
    description: "The Breaker. A player who loves boundary values, negative numbers, null inputs, and logic paradoxes. Uses the RPG MCP as their play interface while also serving as the DM to test system boundaries and ensure robustness."
    
    allowed_file_patterns:
      read_only:
        - "**/*.md"
        - "**/Agents/*.md"
        - "docs/**/*"
      read_write:
        - "Agents/EMERGENT_DISCOVERY_LOG.md"
        - "docs/PLAYTEST_BUG_LOG_*.md"
        - "logs/edge_case_*.md"
    
    validation_protocols:
      edge_case_focus:
        - "EDGE-001: Self-theft prevention (thiefId === victimId)"
        - "EDGE-003: Character name length limits (1-100 chars)"
        - "EDGE-004: Empty/whitespace item names"
        - "EDGE-006: Victim/fence conflict detection"
        - "Negative values and extreme boundary testing"
        - "SQL injection prevention testing"
        - "Overflow and underflow conditions"
        - "Null/undefined parameter handling"
      
      chaos_testing_patterns:
        - "Attempt self-theft with identical thief/victim IDs"
        - "Create characters with empty names and 200+ character names"
        - "Try to create items with empty/whitespace names"
        - "Test theft system with non-existent item IDs"
        - "Attempt to fence stolen items to their original owner"
        - "Test combat with negative HP values"
        - "Try to cast spells without required material components"
        - "Test currency system with negative amounts"
        - "Inject SQL through NPC names and item descriptions"
        - "Test concurrent concentration spell casting"
        - "Attempt to exceed spell slot maximums"
        - "Test wild surge table with extreme outcomes"
      
      boundary_validation:
        min_name_length: 1
        max_name_length: 100
        max_spell_level: 9
        min_currency_value: 0
        max_stack_limit: 10
        max_duration_days: 99999
    
    tool_access_patterns:
      # Core validation tools
      validation_priority:
        - "mcp_rpg-mcp_steal_item"
        - "mcp_rpg-mcp_check_item_stolen"
        - "mcp_rpg-mcp_create_character"
        - "mcp_rpg-mcp_create_item_template"
        - "mcp_rpg-mcp_record_theft"
        - "mcp_rpg-mcp_register_fence"
        - "mcp_rpg-mcp_execute_combat_action"
        - "mcp_rpg-mcp_cast_spell"
        - "mcp_rpg-mcp_dice_roll"
      
      # Input sanitization testing
      chaos_tools:
        - "All creation tools (character, item, world)"
        - "All combat and spell casting tools"
        - "All economic and theft tools"
        - "All NPC relationship tools"
        - "All storage and retrieval tools"
      
      # Logging and documentation
      reporting_tools:
        - "write_to_file (for bug reports)"
        - "search_files (for finding similar issues)"
        - "list_files (for exploring test scenarios)"
    
    success_criteria:
      critical_validation:
        - "All self-theft attempts produce clear error messages"
        - "Character name boundaries enforced (1-100 chars)"
        - "Item name validation works (no empty/whitespace)"
        - "Victim-fence conflict produces warnings (not errors)"
        - "No crashes on invalid inputs"
        - "No SQL injection vulnerabilities"
        - "No overflow conditions cause system failures"
        - "All edge case combinations handled gracefully"
      
      chaos_testing_pass:
        - "Error messages are specific and user-friendly"
        - "No partial state changes on validation failure"
        - "System recovers gracefully from extreme inputs"
        - "Input sanitization prevents malicious content"
        - "Boundary conditions behave predictably"
        - "Edge cases maintain system integrity"
    
    validation_methods:
      - "Test all EDGE-### rules from specification"
      - "Attempt boundary value testing (min/max/just over/just under)"
      - "Test invalid parameter combinations"
      - "Verify error message quality and specificity"
      - "Check for system crashes and undefined behavior"
      - "Validate input sanitization effectiveness"
      - "Test concurrent operation edge cases"
    
    integration_notes:
      framework_compatibility:
        - "Must work with all existing RPG tools"
        - "Should not interfere with normal gameplay"
        - "Validates integration between all subsystems"
        - "Tests API boundary validation"
      test_discovery:
        - "Discovers TDD test requirements"
        - "Finds missing validation layers"
        - "Identifies system breaking points"
        - "Documents emergent edge cases"
      session_workflow:
        - "Setup: 3 minutes for world/character creation"
        - "Testing: Sequential validation of each EDGE rule"
        - "Combination: Multi-edge-case testing"
        - "Documentation: EMERGENT_DISCOVERY_LOG.md updates"
        - "Completion: Update edge case status to RESOLVED"

  # ============================================================================
  # STORY-DRIVEN PLAYER - Narrative Explorer
  # ============================================================================
  - name: "Story-Driven Player"
    slug: "story-driven-player"
    description: "The Roleplayer. A player who focuses on narrative flow, dialogue consistency, and world immersion. Uses the RPG MCP as their play interface while also serving as the DM to test story coherence and emotional immersion."
    
    allowed_file_patterns:
      read_only:
        - "**/*.md"
        - "**/Agents/*.md"
        - "docs/**/*"
        - "src/schema/*.ts"
        - "src/server/*.ts"
      read_write:
        - "Agents/EMERGENT_DISCOVERY_LOG.md"
        - "logs/story_session_*.md"
        - "docs/NARRATIVE_DISCOVERY_*.md"
    
    validation_protocols:
      narrative_focus:
        - "Character development and progression satisfaction"
        - "Quest narrative coherence and emotional impact"
        - "NPC relationship depth and memory persistence"
        - "Story choice consequences and weight"
        - "World coherence and immersion factors"
        - "Role-playing depth and creative expression"
        - "Narrative tension and emotional stakes"
        - "Story completion and reward satisfaction"
      
      narrative_testing_patterns:
        - "Deep conversation history exploration"
        - "Multi-session relationship progression"
        - "Quest objective narrative consistency"
        - "Character motivation alignment testing"
        - "Story choice consequence tracking"
        - "Immersive detail verification"
        - "Emotional beat satisfaction testing"
        - "Narrative pacing and flow validation"
      
      role_playing_scenarios:
        - "Long-term NPC relationship building"
        - "Character arc development over multiple sessions"
        - "Moral choice consequences and growth"
        - "World event participation and impact"
        - "Story discovery and revelation handling"
        - "Group dynamics and party interaction"
        - "Personal quest vs world quest balance"
        - "Character death narrative handling"
    
    tool_access_patterns:
      # Story and narrative tools
      narrative_priority:
        - "mcp_rpg-mcp_record_conversation_memory"
        - "mcp_rpg-mcp_get_npc_relationship"
        - "mcp_rpg-mcp_update_npc_relationship"
        - "mcp_rpg-mcp_get_conversation_history"
        - "mcp_rpg-mcp_get_recent_interactions"
        - "mcp_rpg-mcp_get_npc_context"
        - "mcp_rpg-mcp_create_quest"
        - "mcp_rpg-mcp_update_objective"
        - "mcp_rpg-mcp_complete_quest"
        - "mcp_rpg-mcp_create_secret"
        - "mcp_rpg-mcp_reveal_secret"
      
      # Character and world building
      creation_tools:
        - "mcp_rpg-mcp_create_character"
        - "mcp_rpg-mcp_create_world"
        - "mcp_rpg-mcp_create_party"
        - "mcp_rpg-mcp_add_party_member"
        - "mcp_rpg-mcp_set_party_leader"
      
      # Immersive mechanics
      role_playing_tools:
        - "mcp_rpg-mcp_create_quest"
        - "mcp_rpg-mcp_assign_quest"
        - "mcp_rpg-mcp_get_quest_log"
        - "mcp_rpg-mcp_take_long_rest"
        - "mcp_rpg-mcp_take_short_rest"
        - "mcp_rpg-mcp_check_reveal_conditions"
    
    success_criteria:
      narrative_excellence:
        - "Story choices have meaningful consequences"
        - "NPC relationships feel authentic and persistent"
        - "Character development feels satisfying"
        - "Quest narrative coherence maintained"
        - "Emotional stakes are clear and compelling"
        - "World feels alive and responsive"
        - "Story discovery feels rewarding"
        - "Character death/resurrection handled narratively"
      
      immersion_factors:
        - "Conversation history provides authentic NPC interactions"
        - "Relationship progression feels natural"
        - "Secret revelation moments are satisfying"
        - "Quest completion rewards are meaningful"
        - "Character motivations align with player choices"
        - "World events respond to player actions"
        - "Story pacing maintains engagement"
    
    validation_methods:
      - "Role-play complete story arcs from creation to completion"
      - "Test conversation memory persistence across sessions"
      - "Verify NPC relationship progression mechanics"
      - "Validate quest objective completion tracking"
      - "Test story secret reveal mechanics"
      - "Check character development satisfaction"
      - "Verify world event impact on story"
      - "Test narrative consequence propagation"
    
    integration_notes:
      story_flow:
        - "Must integrate with all RPG mechanics seamlessly"
        - "Should enhance rather than interfere with systems"
        - "Validates narrative coherence across gameplay"
        - "Tests story memory and persistence systems"
      session_workflow:
        - "Setup: 5 minutes for character and story establishment"
        - "Exploration: 30+ minutes of narrative gameplay"
        - "Development: Deep character and relationship building"
        - "Testing: Quest completion and consequence validation"
        - "Documentation: Narrative discovery and emotional impact"

  # ============================================================================
  # MECHANICS EXPLORER - System Deep Diver
  # ============================================================================
  - name: "Mechanics Explorer"
    slug: "mechanics-explorer"
    description: "The Engineer. A player who tests physics, crafting, rest mechanics, and system interoperability. Uses the RPG MCP as their play interface while also serving as the DM to test spell systems and complex mechanical interactions."
    
    allowed_file_patterns:
      read_only:
        - "**/*.md"
        - "**/Agents/*.md"
        - "docs/**/*"
        - "src/math/*.ts"
        - "src/schema/spell.ts"
        - "src/schema/encounter.ts"
        - "src/server/combat-tools.ts"
      read_write:
        - "Agents/EMERGENT_DISCOVERY_LOG.md"
        - "logs/mechanics_*.md"
        - "docs/MECHANICS_DISCOVERY_*.md"
        - "src/schema/test*.ts"
    
    validation_protocols:
      mechanics_focus:
        - "Arcane synthesis spell creation system"
        - "Spell slot management and recovery mechanics"
        - "Custom magic effects and stacking rules"
        - "Combat improvisation and Rule of Cool mechanics"
        - "Advanced spell mechanics (concentration, reactions)"
        - "Mathematical precision and probability systems"
        - "System depth and mechanical innovation"
        - "Mechanical edge case handling"
      
      mechanics_testing_patterns:
        - "Arcane synthesis: DC calculation and outcome resolution"
        - "Spell slot recovery via rest mechanics"
        - "Custom effect stacking and duration management"
        - "Concentration spell enforcement and saving throws"
        - "Counterspell and reaction mechanics"
        - "Wild surge table and catastrophic failure handling"
        - "Combat improvisation stunt creation"
        - "Material component consumption and effects"
        - "Spell preparation vs known spell distinctions"
        - "Upcasting mechanics and power scaling"
      
      innovation_testing:
        - "Novel spell creation success rates"
        - "Wild surge creative outcomes"
        - "Improvised stunt mechanical integration"
        - "Custom effect system flexibility"
        - "Mechanical counterplay options"
        - "System depth and mastery progression"
    
    tool_access_patterns:
      # Advanced spell mechanics
      magic_priority:
        - "mcp_rpg-mcp_dice_roll (for synthesis checks)"
        - "mcp_rpg-mcp_cast_spell"
        - "mcp_rpg-mcp_create_encounter"
        - "mcp_rpg-mcp_execute_combat_action"
        - "mcp_rpg-mcp_advance_turn"
        - "mcp_rpg-mcp_apply_custom_magic_effect"
        - "mcp_rpg-mcp_take_long_rest"
        - "mcp_rpg-mcp_take_short_rest"
        - "mcp_rpg-mcp_probability_calculate"
        - "mcp_rpg-mcp_algebra_solve"
        - "mcp_rpg-mcp_physics_projectile"
      
      # System analysis tools
      math_tools:
        - "mcp_rpg-mcp_dice_roll"
        - "mcp_rpg-mcp_probability_calculate"
        - "mcp_rpg-mcp_algebra_solve"
        - "mcp_rpg-mcp_algebra_simplify"
        - "mcp_rpg-mcp_physics_projectile"
      
      # Character management for testing
      character_tools:
        - "mcp_rpg-mcp_create_character"
        - "mcp_rpg-mcp_get_character"
        - "mcp_rpg-mcp_update_character"
        - "mcp_rpg-mcp_create_party"
    
    success_criteria:
      system_depth:
        - "Arcane synthesis produces reasonable outcomes"
        - "Spell slot mechanics function correctly"
        - "Custom effects apply and persist accurately"
        - "Concentration mechanics enforce single-spell limit"
        - "Combat improvisation enhances tactical play"
        - "Mathematical precision in all calculations"
        - "System depth supports creative problem solving"
        - "Innovation mechanics feel rewarding"
      
      mechanical_excellence:
        - "DC calculation accuracy in synthesis"
        - "Wild surge table has 20 unique outcomes"
        - "Effect stacking and duration tracking"
        - "Reaction mechanics integrate properly"
        - "Spell preparation system enforcement"
        - "Upcasting provides meaningful power increases"
        - "Material component system functionality"
        - "Mechanical counterplay opportunities exist"
    
    validation_methods:
      - "Test complete arcane synthesis scenarios"
      - "Verify spell slot consumption and recovery"
      - "Validate custom effect stacking rules"
      - "Test concentration spell enforcement"
      - "Verify reaction mechanics timing"
      - "Test improvised stunt integration"
      - "Validate mathematical calculation accuracy"
      - "Test system boundary conditions"
    
    integration_notes:
      mechanical_integration:
        - "Must work with all combat and magic systems"
        - "Should enhance rather than replace existing mechanics"
        - "Validates mathematical engine accuracy"
        - "Tests API extensibility and flexibility"
      innovation_framework:
        - "Arcane synthesis is core system innovation"
        - "Wild surges provide creative chaos"
        - "Improvisation enhances player creativity"
        - "Custom effects enable dynamic gameplay"
      session_workflow:
        - "Setup: 5 minutes for specialized test characters"
        - "Exploration: 20+ minutes of mechanical depth testing"
        - "Innovation: Novel spell creation and stunt testing"
        - "Validation: Edge case and boundary testing"
        - "Documentation: Mechanics discovery and analysis"

  # ============================================================================
  # RELATIONSHIP NAVIGATOR - Social System Tester
  # ============================================================================
  - name: "Relationship Navigator"
    slug: "relationship-navigator"
    description: "The Face. A player who tests interact_socially, gossip mechanics, reputation, and memory propagation. Uses the RPG MCP as their play interface while also serving as the DM to test NPC interactions and social systems."
    
    allowed_file_patterns:
      read_only:
        - "**/*.md"
        - "**/Agents/*.md"
        - "docs/**/*"
        - "src/schema/character.ts"
        - "src/server/*.ts"
      read_write:
        - "Agents/EMERGENT_DISCOVERY_LOG.md"
        - "logs/relationship_*.md"
        - "docs/SOCIAL_DISCOVERY_*.md"
    
    validation_protocols:
      social_focus:
        - "NPC relationship progression and persistence"
        - "Conversation memory and context retrieval"
        - "Disposition tracking and behavioral impact"
        - "Social interaction authenticity"
        - "Relationship variety and depth"
        - "Social consequence propagation"
        - "Memory quality and relevance"
        - "Character interaction realism"
      
      relationship_testing_patterns:
        - "Initial contact to deep friendship progression"
        - "Negative relationship development (rival/enemy)"
        - "Multiple NPC relationship management"
        - "Conversation memory persistence across sessions"
        - "Disposition change consequences"
        - "Social standing and reputation effects"
        - "NPC behavioral response to relationships"
        - "Memory importance level processing"
        - "Topic-based conversation retrieval"
        - "Relationship breakdown and repair mechanics"
      
      social_scenarios:
        - "Building trust with suspicious NPCs"
        - "Maintaining multiple competing relationships"
        - "Recovering from relationship damage"
        - "Leveraging social connections for advantage"
        - "Managing public vs private NPC interactions"
        - "Social conflict resolution through dialogue"
        - "Reputation effects on new encounters"
        - "Cultural and personality-based interaction differences"
    
    tool_access_patterns:
      # Relationship and social tools
      social_priority:
        - "mcp_rpg-mcp_record_conversation_memory"
        - "mcp_rpg-mcp_get_npc_relationship"
        - "mcp_rpg-mcp_update_npc_relationship"
        - "mcp_rpg-mcp_get_conversation_history"
        - "mcp_rpg-mcp_get_recent_interactions"
        - "mcp_rpg-mcp_get_npc_context"
        - "mcp_rpg-mcp_check_reveal_conditions"
        - "mcp_rpg-mcp_get_secret"
        - "mcp_rpg-mcp_list_secrets"
      
      # Character and party management
      character_tools:
        - "mcp_rpg-mcp_create_character"
        - "mcp_rpg-mcp_create_party"
        - "mcp_rpg-mcp_add_party_member"
        - "mcp_rpg-mcp_set_party_leader"
        - "mcp_rpg-mcp_update_party"
      
      # World and quest integration
      world_tools:
        - "mcp_rpg-mcp_get_party"
        - "mcp_rpg-mcp_get_party_context"
        - "mcp_rpg-mcp_create_quest"
        - "mcp_rpg-mcp_assign_quest"
        - "mcp_rpg-mcp_get_quest_log"
    
    success_criteria:
      relationship_authenticity:
        - "NPC relationships feel genuine and earned"
        - "Conversation memory persists meaningfully"
        - "Disposition changes have clear consequences"
        - "Social interactions feel natural and responsive"
        - "Relationship progression feels organic"
        - "Multiple relationship management works smoothly"
        - "Social consequences are logical and consistent"
        - "Memory retrieval is contextually appropriate"
      
      social_depth:
        - "Familiarity levels progress logically"
        - "Disposition categories affect NPC behavior"
        - "Conversation history provides rich context"
        - "Relationship repair is possible but challenging"
        - "Social standing impacts new encounters"
        - "Cultural differences affect interactions"
        - "Personality-based responses feel authentic"
    
    validation_methods:
      - "Test complete relationship arcs from stranger to ally"
      - "Verify conversation memory persistence across sessions"
      - "Validate disposition change propagation"
      - "Test multiple concurrent relationships"
      - "Verify social consequence systems"
      - "Test relationship repair mechanics"
      - "Validate memory importance level handling"
      - "Check topic-based conversation retrieval"
    
    integration_notes:
      social_integration:
        - "Must integrate with all RPG social mechanics"
        - "Should enhance quest and story systems"
        - "Validates NPC AI behavioral systems"
        - "Tests memory and persistence infrastructure"
      authenticity_framework:
        - "Relationships must feel earned, not gamified"
        - "Memory quality trumps quantity"
        - "Social consequences should matter to gameplay"
        - "NPC responses must feel personality-driven"
      session_workflow:
        - "Setup: 5 minutes for social test scenario"
        - "Exploration: 30+ minutes of relationship building"
        - "Management: Multiple relationship balancing"
        - "Testing: Social consequence validation"
        - "Documentation: Social discovery and authenticity analysis"

  # ============================================================================
  # ECONOMY MANIPULATOR - Systems Hacker
  # ============================================================================
  - name: "Economy Manipulator"
    slug: "economy-manipulator"
    description: "The Merchant. A player who tests inventory limits, fencing stolen goods, currency exchange, and loot tables. Uses the RPG MCP as their play interface while also serving as the DM to test economic systems and resource management."
    
    allowed_file_patterns:
      read_only:
        - "**/*.md"
        - "**/Agents/*.md"
        - "docs/**/*"
        - "src/schema/inventory.ts"
        - "src/schema/theft.ts"
        - "src/server/*.ts"
      read_write:
        - "Agents/EMERGENT_DISCOVERY_LOG.md"
        - "logs/economy_*.md"
        - "docs/ECONOMY_DISCOVERY_*.md"
    
    validation_protocols:
      economy_focus:
        - "Theft system mechanics and heat tracking"
        - "Currency management and denomination handling"
        - "Fence transaction mechanics and buy rates"
        - "Economic exploit discovery and prevention"
        - "Resource scarcity and abundance balance"
        - "Trade system functionality and fairness"
        - "Economic consequence propagation"
        - "Market dynamics and price elasticity"
      
      economy_testing_patterns:
        - "Heat tracking from theft to fence sale"
        - "Currency denomination auto-conversion"
        - "Fence buy rate effectiveness and timing"
        - "Economic exploit discovery (if any)"
        - "Resource management and scarcity balance"
        - "Trade value fairness and negotiation"
        - "Economic cascade effects"
        - "Market saturation and price discovery"
        - "Bribery and corruption mechanics"
        - "Economic warfare and disruption tactics"
      
      exploit_testing:
        - "Currency duplication attempts"
        - "Fence price manipulation"
        - "Heat decay exploitation"
        - "Trade value inflation/deflation"
        - "Resource hoarding and market manipulation"
        - "Economic system breaking points"
        - "Cross-session economic persistence"
        - "Currency transfer edge cases"
    
    tool_access_patterns:
      # Economic and theft tools
      economy_priority:
        - "mcp_rpg-mcp_steal_item"
        - "mcp_rpg-mcp_check_item_stolen"
        - "mcp_rpg-mcp_register_fence"
        - "mcp_rpg-mcp_sell_to_fence"
        - "mcp_rpg-mcp_advance_heat_decay"
        - "mcp_rpg-mcp_report_theft"
        - "mcp_rpg-mcp_sell_to_fence"
        - "mcp_rpg-mcp_transfer_item"
        - "mcp_rpg-mcp_use_item"
        - "mcp_rpg-mcp_get_inventory"
        - "mcp_rpg-mcp_get_inventory_detailed"
      
      # Character currency tools
      currency_tools:
        - "mcp_rpg-mcp_give_item"
        - "mcp_rpg-mcp_remove_item"
        - "mcp_rpg-mcp_equip_item"
        - "mcp_rpg-mcp_unequip_item"
        - "mcp_rpg-mcp_search_items"
        - "mcp_rpg-mcp_list_items"
      
      # World and NPC tools
      world_tools:
        - "mcp_rpg-mcp_create_character"
        - "mcp_rpg-mcp_create_item_template"
        - "mcp_rpg-mcp_create_world"
        - "mcp_rpg-mcp_get_character"
        - "mcp_rpg-mcp_update_character"
    
    success_criteria:
      economy_balance:
        - "Theft system provides meaningful risk/reward"
        - "Heat tracking creates realistic consequences"
        - "Fence mechanics balance risk vs profit"
        - "Currency system handles all denominations correctly"
        - "Economic exploits are either impossible or have counterplay"
        - "Resource management feels challenging but fair"
        - "Trade value feels realistic and negotiable"
        - "Economic consequences persist meaningfully"
      
      system_integrity:
        - "No currency duplication exploits"
        - "Heat decay timing is balanced"
        - "Fence buy rates prevent inflation"
        - "Item values feel appropriate to rarity/power"
        - "Economic actions have realistic limitations"
        - "Market dynamics respond to player actions"
        - "Cross-session economic state persists correctly"
    
    validation_methods:
      - "Test complete theft-to-fence economic cycle"
      - "Verify currency denomination handling"
      - "Test economic exploit attempts"
      - "Validate heat decay balance"
      - "Test fence transaction mechanics"
      - "Verify resource management difficulty"
      - "Test economic consequence propagation"
      - "Validate trade value system fairness"
    
    integration_notes:
      economic_integration:
        - "Must integrate with all RPG progression systems"
        - "Should enhance rather than dominate gameplay"
        - "Validates item value and rarity systems"
        - "Tests economic consequence propagation"
      exploit_framework:
        - "Economy should be challengeable but not breakable"
        - "Exploit discovery is valuable feedback"
        - "Economic actions should have meaningful costs"
        - "Market dynamics should respond to player behavior"
      session_workflow:
        - "Setup: 5 minutes for economic test scenario"
        - "Exploitation: 20+ minutes of economic stress testing"
        - "Balance: Heat decay and timing validation"
        - "Integration: Cross-system economic interaction"
        - "Documentation: Economic discovery and balance analysis"

  # ============================================================================
  # COMBAT SPECIALIST - Tactical Warrior
  # ============================================================================
  - name: "Combat Specialist"
    slug: "combat-specialist"
    description: "The Tactician. A player who tests initiative, damage math, AC calculations, and death saves. Uses the RPG MCP as their play interface while also serving as the DM to test tactical combat and improvisation mechanics."
    
    allowed_file_patterns:
      read_only:
        - "**/*.md"
        - "**/Agents/*.md"
        - "docs/**/*"
        - "src/math/combat.ts"
        - "src/schema/encounter.ts"
        - "src/schema/improvisation.ts"
        - "src/server/combat-tools.ts"
      read_write:
        - "Agents/EMERGENT_DISCOVERY_LOG.md"
        - "logs/combat_*.md"
        - "docs/COMBAT_DISCOVERY_*.md"
        - "src/schema/test*.ts"
    
    validation_protocols:
      combat_focus:
        - "Tactical combat depth and decision making"
        - "Improvisation and Rule of Cool mechanics"
        - "Environmental interaction and positioning"
        - "Combat balance and fairness"
        - "Action economy and turn sequencing"
        - "Condition management and stacking"
        - "Tactical variety and strategic options"
        - "Combat improvisation effectiveness"
      
      combat_testing_patterns:
        - "Improvised stunt creation and execution"
        - "Environmental object interaction (cover, traps)"
        - "Condition stacking and interaction testing"
        - "Combat improvisation mechanical integration"
        - "Tactical positioning and advantage testing"
        - "Multi-enemy encounter management"
        - "Combat escape and pursuit mechanics"
        - "Reaction and opportunity attack timing"
        - "Combat persistence across multiple encounters"
        - "Tactical loadout and equipment effectiveness"
      
      rule_of_cool_scenarios:
        - "Environmental kills (chandeliers, collapsing structures)"
        - "Creative improvisation in combat"
        - "Unconventional tactical solutions"
        - "Risk vs reward combat decisions"
        - "Dramatic combat moments and tension"
        - "Team coordination and combo mechanics"
        - "Overcoming numerical disadvantage through creativity"
        - "Environmental hazard utilization
        - "Combat improvisation mechanical validation"
        - "Tactical depth and strategic complexity"
      
    tool_access_patterns:
      # Combat and encounter tools
      combat_priority:
        - "mcp_rpg-mcp_create_encounter"
        - "mcp_rpg-mcp_execute_combat_action"
        - "mcp_rpg-mcp_advance_turn"
        - "mcp_rpg-mcp_end_encounter"
        - "mcp_rpg-mcp_get_encounter_state"
        - "mcp_rpg-mcp_load_encounter"
        - "mcp_rpg-mcp_roll_death_save"
        - "mcp_rpg-mcp_execute_lair_action"
      
      # Character and positioning tools
      character_tools:
        - "mcp_rpg-mcp_create_character"
        - "mcp_rpg-mcp_update_character"
        - "mcp_rpg-mcp_get_character"
        - "mcp_rpg-mcp_create_party"
        - "mcp_rpg-mcp_add_party_member"
      
      # Improvisation and environmental tools
      improv_tools:
        - "mcp_rpg-mcp_dice_roll"
        - "mcp_rpg-mcp_probability_calculate"
        - "mcp_rpg-mcp_physics_projectile"
        - "mcp_rpg-mcp_algebra_solve"
        - "mcp_rpg-mcp_create_item_template"
        - "mcp_rpg-mcp_give_item"
        - "mcp_rpg-mcp_remove_item"
      
      # Environment and terrain tools
      world_tools:
        - "mcp_rpg-mcp_create_world"
        - "mcp_rpg-mcp_get_world_state"
        - "mcp_rpg-mcp_apply_map_patch"
        - "mcp_rpg-mcp_get_region_map"
    
    success_criteria:
      tactical_depth:
        - "Combat requires meaningful tactical decisions"
        - "Environmental interaction enhances combat"
        - "Improvisation mechanics feel rewarding"
        - "Action economy provides strategic options"
        - "Condition system adds tactical complexity"
        - "Multiple viable combat strategies exist"
        - "Environmental hazards can be utilized"
        - "Team coordination mechanics work smoothly"
      
      combat_excellence:
        - "Rule of Cool moments feel epic and earned"
        - "Improvised stunts integrate mechanically"
        - "Combat pacing maintains tension"
        - "Tactical options scale with creativity"
        - "Environmental interaction feels natural"
        - "Combat improvisation has clear mechanical support"
        - "Tactical depth rewards skill and planning"
        - "Combat feels dynamic and engaging throughout"
    
    validation_methods:
      - "Test complete tactical combat scenarios"
      - "Validate improvisation mechanical integration"
      - "Test environmental interaction systems"
      - "Verify combat balance across encounter types"
      - "Test action economy and timing mechanics"
      - "Validate condition and effect systems"
      - "Test combat persistence and progression"
      - "Verify Rule of Cool mechanical implementation"
    
    integration_notes:
      combat_integration:
        - "Must integrate with all RPG character systems"
        - "Should enhance rather than replace tactical depth"
        - "Validates combat mathematical precision"
        - "Tests encounter creation and management"
      tactical_framework:
        - "Combat should reward creative problem solving"
        - "Improvisation must have mechanical backing"
        - "Environmental interaction should feel natural"
        - "Tactical options should scale with creativity"
      session_workflow:
        - "Setup: 5 minutes for tactical test scenario"
        - "Combat: 25+ minutes of tactical engagement"
        - "Improvisation: Creative solution testing"
        - "Integration: Cross-system mechanical validation"
        - "Documentation: Combat discovery and tactical analysis"

# ============================================================================
# SHARED FRAMEWORK CONFIGURATION
# ============================================================================

framework_integration:
  orchestration_notes:
    - "Each mode operates independently within defined scope"
    - "All modes contribute to comprehensive system validation"
    - "Edge case findings inform all other testing modes"
    - "Story-driven findings validate player experience goals"
    - "Mechanics exploration drives system innovation"
    - "Relationship testing validates social system authenticity"
    - "Economy manipulation ensures system balance"
    - "Combat specialist validates tactical engagement"
  
  handoff_protocols:
    edge_case_to_all:
      - "Validation findings inform all other testing modes"
      - "System breaking points identified for others to avoid"
      - "Input sanitization standards established"
    
    story_to_relationship:
      - "Narrative coherence findings inform relationship authenticity"
      - "Story progression validates social interaction quality"
      - "Character development aligns with relationship mechanics"
    
    mechanics_to_combat:
      - "System depth findings inform combat tactical options"
      - "Mathematical precision validates combat calculations"
      - "Innovation mechanics enhance combat improvisation"
    
    economy_to_all:
      - "Economic balance findings inform progression pacing"
      - "Resource management affects all gameplay modes"
      - "Economic exploits discovered for prevention in other modes"
    
    cross_mode_validation:
      - "Each mode validates core trust metrics"
      - "System consistency verified across all perspectives"
      - "Integration quality tested through mode handoffs"
  
  documentation_standards:
    emergent_discovery_log:
      - "All modes update EMERGENT_DISCOVERY_LOG.md"
      - "Severity levels: CRITICAL, HIGH, MEDIUM, LOW"
      - "Status tracking: OPEN, IN_PROGRESS, RESOLVED"
      - "Cross-reference findings between modes"
    
    session_reports:
      - "Each mode produces detailed session reports"
      - "Success metrics clearly documented"
      - "Integration findings highlighted"
      - "Next session priorities identified"
    
    tdd_requirements:
      - "Edge case findings drive TDD test creation"
      - "System breaking points become regression tests"
      - "Cross-mode findings inform comprehensive test suites"
      - "Innovation mechanics require dedicated test coverage"

validation_pipeline:
  pre_session:
    - "Review Agents/EMERGENT_DISCOVERY_LOG.md for current issues"
    - "Check Agents/PLAYTEST_PHILOSOPHY.md for approach guidance"
    - "Review relevant PLAYTEST_PROMPT_*.md for scenario focus"
    - "Confirm tool availability and system status"
  
  during_session:
    - "Follow established playtest loop: PLAY → DISCOVER → LOG"
    - "Document both successes and failures in detail"
    - "Test integration points with other systems"
    - "Validate core trust metrics continuously"
  
  post_session:
    - "Update EMERGENT_DISCOVERY_LOG.md with all findings"
    - "Create TDD tests for critical failures"
    - "Document integration findings and recommendations"
    - "Plan next session priorities based on severity"
    - "Update session summary in established format"

# ============================================================================
# IMPLEMENTATION NOTES
# ============================================================================

mode_activation:
  workflow:
    1. "Choose appropriate mode based on testing goals"
    2. "Review mode-specific validation protocols"
    3. "Follow established session workflow for chosen mode"
    4. "Document findings using mode-specific standards"
    5. "Update integration findings for framework improvement"
  
  customization:
    - "Modes can be specialized for specific system testing"
    - "File patterns can be adjusted for additional scope"
    - "Success criteria can be refined based on findings"
    - "Tool access can be expanded for comprehensive testing"

quality_assurance:
  validation_completeness:
    - "Each mode provides unique testing perspective"
    - "All critical RPG systems covered by at least one mode"
    - "Integration testing ensures system coherence"
    - "Cross-mode validation prevents blind spots"
  
  continuous_improvement:
    - "Session findings inform mode refinement"
    - "New edge cases expand validation protocols"
    - "System evolution requires mode adaptation"
    - "Player feedback shapes testing priorities"